# FastVAR Panorama Configuration - Cubemap Mode
# 6-face cubemap panorama training and inference

# Mode selection
mode: cubemap

# FastVAR extensions
use_fastvar: true
use_border_keep: true
border_keep_w: 2  # border width in tokens to always keep
seam_boost: 1.5   # boost factor for border token importance

# Shared border latent (for cross-face consistency)
use_shared_border_latent: true
shared_border_mode: avg  # "avg" (average borders) or "copy_owner" (first face owns border)
shared_border_width_tokens: 2

# 3D direction embedding
use_dir3d_embed: true
dir3d_embed_dim: 64  # intermediate MLP dimension

# Spherical attention bias
use_spherical_attn_bias: true
spherical_bias_lambda: 1.0   # bias strength
spherical_bias_tau_deg: null
spherical_attn_fallback: standard

# Seam losses (for training)
use_seam_losses: true
wrap_seam_weight: 1.0          # weight for face boundary consistency
pole_consistency_weight: 0.5   # less important for cubemap (no pole distortion)
pole_band_deg: 20.0
pole_tau_deg: 10.0
pole_sigma_deg: 10.0
texture_step_boost: 1.0
structure_step_weight: 0.1

# Cubemap-specific settings
cubemap_face_size: 512

# Generation order for sequential face generation
# front(+Z) -> right(+X) -> back(-Z) -> left(-X) -> up(+Y) -> down(-Y)
cubemap_generation_order:
  - front
  - right
  - back
  - left
  - up
  - down

# Resolution preset (per face)
pn: "0.25M"  # smaller preset for each 512x512 face

# Generation settings
cfg: 4.0
tau: 0.5
seed: -1

# Face indices reference:
#   FACE_FRONT = 0   # +Z
#   FACE_RIGHT = 1   # +X
#   FACE_BACK = 2    # -Z
#   FACE_LEFT = 3    # -X
#   FACE_UP = 4      # +Y
#   FACE_DOWN = 5    # -Y

# Example prompt for cubemap
# prompt: "A seamless cubemap panorama, 6 consistent faces. 
#          Modern city skyline at dusk, glass skyscrapers reflecting sunset colors,
#          clear sky transitioning from orange to deep blue, urban landscape,
#          photorealistic, high detail, consistent lighting across all faces."
